{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _toConsumableArray from \"/Volumes/Bohyun/dev/bohyun-choi-0320.github.io/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Volumes/Bohyun/dev/bohyun-choi-0320.github.io/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Volumes/Bohyun/dev/bohyun-choi-0320.github.io/component/experience/row.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Badge, Col, Row } from 'reactstrap';\nimport { DateTime } from 'luxon';\nimport { Style } from '../common/Style';\nimport Util from '../common/Util';\nimport React from 'react';\nexport default function ExperienceRow(_ref) {\n  var _this = this;\n\n  var item = _ref.item,\n      index = _ref.index;\n  var positionsWithDates = item.positions.map(function (position) {\n    return _objectSpread(_objectSpread({}, position), {}, {\n      startedAtDate: DateTime.fromFormat(position.startedAt, Util.LUXON_DATE_FORMAT.YYYY_LL),\n      endedAtDate: position.endedAt ? DateTime.fromFormat(position.endedAt, Util.LUXON_DATE_FORMAT.YYYY_LL) : null,\n      isCurrent: !position.endedAt\n    });\n  });\n  var sortedPositions = positionsWithDates.slice().sort(function (a, b) {\n    return b.startedAtDate.toMillis() - a.startedAtDate.toMillis();\n  });\n  var minStartedAt = DateTime.min.apply(DateTime, _toConsumableArray(sortedPositions.map(function (position) {\n    return position.startedAtDate;\n  })));\n  var isCurrentlyEmployed = sortedPositions.some(function (position) {\n    return position.isCurrent;\n  });\n\n  function hasEndedAtDate(position) {\n    return position.endedAtDate !== null;\n  }\n\n  var endedAtDates = sortedPositions.filter(hasEndedAtDate).map(function (position) {\n    return position.endedAtDate;\n  });\n  var maxEndedAt;\n\n  if (isCurrentlyEmployed) {\n    maxEndedAt = DateTime.local();\n  } else if (endedAtDates.length > 0) {\n    maxEndedAt = DateTime.max.apply(DateTime, _toConsumableArray(endedAtDates));\n  } else {\n    maxEndedAt = DateTime.local();\n  }\n\n  var periodTitle = createOverallWorkingPeriod(sortedPositions);\n  var hasMultiplePositions = sortedPositions.length > 1;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [index > 0 && /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        sm: 12,\n        md: 3,\n        className: \"text-md-right\",\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          style: Style.gray,\n          children: periodTitle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        sm: 12,\n        md: 9,\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            display: 'inline-flex',\n            alignItems: 'center'\n          },\n          children: [item.title, ' ', /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '65%',\n              display: 'inline-flex',\n              alignItems: 'center'\n            },\n            children: [isCurrentlyEmployed && /*#__PURE__*/_jsxDEV(Badge, {\n              color: \"primary\",\n              className: \"ml-1\",\n              children: \"\\uC7AC\\uC9C1 \\uC911\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Badge, {\n              color: \"info\",\n              className: \"ml-1\",\n              children: Util.getFormattingDuration(minStartedAt, maxEndedAt)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), sortedPositions.map(function (position, posIndex) {\n      return /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mt-2\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          sm: 12,\n          md: 3,\n          className: \"text-md-right\",\n          children: hasMultiplePositions && /*#__PURE__*/_jsxDEV(\"span\", {\n            style: Style.gray,\n            children: createWorkingPeriod(position.startedAtDate, position.endedAtDate)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Col, {\n          sm: 12,\n          md: 9,\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            style: Style.gray,\n            children: position.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"pt-2\",\n            children: [position.descriptions.map(function (description, descIndex) {\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                children: description\n              }, descIndex.toString(), false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 17\n              }, _this);\n            }), createSkillKeywords(position.skillKeywords)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, _this)]\n      }, posIndex.toString(), true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, _this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n_c = ExperienceRow;\n\nfunction createOverallWorkingPeriod(positions) {\n  var DATE_FORMAT = Util.LUXON_DATE_FORMAT.YYYY_DOT_LL;\n  var startedAt = positions[positions.length - 1].startedAtDate;\n  var isCurrentlyEmployed = positions.some(function (position) {\n    return position.isCurrent;\n  }); // 재직 중일 때는 종료일 없이 표시\n\n  if (isCurrentlyEmployed) {\n    return \"\".concat(startedAt.toFormat(DATE_FORMAT), \" ~\");\n  }\n\n  function hasEndedAtDate(position) {\n    return position.endedAtDate !== null;\n  }\n\n  var endedAtDates = positions.filter(hasEndedAtDate).map(function (position) {\n    return position.endedAtDate;\n  });\n  var endedAt;\n\n  if (endedAtDates.length > 0) {\n    endedAt = DateTime.max.apply(DateTime, _toConsumableArray(endedAtDates));\n  } else {\n    endedAt = DateTime.local();\n  }\n\n  return \"\".concat(startedAt.toFormat(DATE_FORMAT), \" ~ \").concat(endedAt.toFormat(DATE_FORMAT));\n}\n\nfunction createSkillKeywords(skillKeywords) {\n  var _this2 = this;\n\n  if (!skillKeywords) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"li\", {\n    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n      children: \"Skill Keywords\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: skillKeywords.map(function (keyword, index) {\n        return /*#__PURE__*/_jsxDEV(Badge, {\n          style: Style.skillKeywordBadge,\n          color: \"secondary\",\n          className: \"mr-1\",\n          children: keyword\n        }, index.toString(), false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, _this2);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 142,\n    columnNumber: 5\n  }, this);\n}\n\nfunction createWorkingPeriod(startedAt, endedAt) {\n  var DATE_FORMAT = Util.LUXON_DATE_FORMAT.YYYY_DOT_LL;\n\n  if (!endedAt) {\n    return \"\".concat(startedAt.toFormat(DATE_FORMAT), \" ~\");\n  }\n\n  return \"\".concat(startedAt.toFormat(DATE_FORMAT), \" ~ \").concat(endedAt.toFormat(DATE_FORMAT));\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"ExperienceRow\");","map":{"version":3,"sources":["/Volumes/Bohyun/dev/bohyun-choi-0320.github.io/component/experience/row.tsx"],"names":["Badge","Col","Row","DateTime","Style","Util","React","ExperienceRow","item","index","positionsWithDates","positions","map","position","startedAtDate","fromFormat","startedAt","LUXON_DATE_FORMAT","YYYY_LL","endedAtDate","endedAt","isCurrent","sortedPositions","slice","sort","a","b","toMillis","minStartedAt","min","isCurrentlyEmployed","some","hasEndedAtDate","endedAtDates","filter","maxEndedAt","local","length","max","periodTitle","createOverallWorkingPeriod","hasMultiplePositions","gray","display","alignItems","title","fontSize","getFormattingDuration","posIndex","createWorkingPeriod","descriptions","description","descIndex","toString","createSkillKeywords","skillKeywords","DATE_FORMAT","YYYY_DOT_LL","toFormat","keyword","skillKeywordBadge"],"mappings":"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","sourcesContent":["import { Badge, Col, Row } from 'reactstrap';\n\nimport { DateTime } from 'luxon';\nimport { PropsWithChildren } from 'react';\nimport { IExperience } from './IExperience';\nimport { Style } from '../common/Style';\nimport Util from '../common/Util';\nimport React from 'react';\n\ntype PositionWithDates = IExperience.Position & {\n  startedAtDate: DateTime;\n  endedAtDate: DateTime | null;\n  isCurrent: boolean;\n};\n\nexport default function ExperienceRow({\n  item,\n  index,\n}: PropsWithChildren<{ item: IExperience.Item; index: number }>) {\n  const positionsWithDates: PositionWithDates[] = item.positions.map((position) => ({\n    ...position,\n    startedAtDate: DateTime.fromFormat(position.startedAt, Util.LUXON_DATE_FORMAT.YYYY_LL),\n    endedAtDate: position.endedAt\n      ? DateTime.fromFormat(position.endedAt, Util.LUXON_DATE_FORMAT.YYYY_LL)\n      : null,\n    isCurrent: !position.endedAt,\n  }));\n\n  const sortedPositions = positionsWithDates\n    .slice()\n    .sort((a, b) => b.startedAtDate.toMillis() - a.startedAtDate.toMillis());\n\n  const minStartedAt = DateTime.min(...sortedPositions.map((position) => position.startedAtDate));\n  const isCurrentlyEmployed = sortedPositions.some((position) => position.isCurrent);\n\n  function hasEndedAtDate(\n    position: PositionWithDates,\n  ): position is PositionWithDates & { endedAtDate: DateTime } {\n    return position.endedAtDate !== null;\n  }\n\n  const endedAtDates = sortedPositions\n    .filter(hasEndedAtDate)\n    .map((position) => position.endedAtDate);\n\n  let maxEndedAt: DateTime;\n  if (isCurrentlyEmployed) {\n    maxEndedAt = DateTime.local();\n  } else if (endedAtDates.length > 0) {\n    maxEndedAt = DateTime.max(...endedAtDates);\n  } else {\n    maxEndedAt = DateTime.local();\n  }\n\n  const periodTitle = createOverallWorkingPeriod(sortedPositions);\n  const hasMultiplePositions = sortedPositions.length > 1;\n\n  return (\n    <div>\n      {index > 0 && <hr />}\n      {/* 최상위 Row: 전체 재직 기간과 회사명 표시 */}\n      <Row>\n        <Col sm={12} md={3} className=\"text-md-right\">\n          <h4 style={Style.gray}>{periodTitle}</h4>\n        </Col>\n        <Col sm={12} md={9}>\n          <h4 style={{ display: 'inline-flex', alignItems: 'center' }}>\n            {item.title}{' '}\n            <span style={{ fontSize: '65%', display: 'inline-flex', alignItems: 'center' }}>\n              {isCurrentlyEmployed && (\n                <Badge color=\"primary\" className=\"ml-1\">\n                  재직 중\n                </Badge>\n              )}\n              <Badge color=\"info\" className=\"ml-1\">\n                {Util.getFormattingDuration(minStartedAt, maxEndedAt)}\n              </Badge>\n            </span>\n          </h4>\n        </Col>\n      </Row>\n\n      {/* 각 Position을 최신 순으로 반복하여 개별 재직 기간과 직책 표시 */}\n      {sortedPositions.map((position, posIndex) => (\n        <Row key={posIndex.toString()} className=\"mt-2\">\n          <Col sm={12} md={3} className=\"text-md-right\">\n            {/* positions가 1개 이상일 때만 Position의 재직 기간 표시 */}\n            {hasMultiplePositions && (\n              <span style={Style.gray}>\n                {createWorkingPeriod(position.startedAtDate, position.endedAtDate)}\n              </span>\n            )}\n          </Col>\n          <Col sm={12} md={9}>\n            <i style={Style.gray}>{position.title}</i>\n            <ul className=\"pt-2\">\n              {position.descriptions.map((description, descIndex) => (\n                <li key={descIndex.toString()}>{description}</li>\n              ))}\n              {createSkillKeywords(position.skillKeywords)}\n            </ul>\n          </Col>\n        </Row>\n      ))}\n    </div>\n  );\n}\n\nfunction createOverallWorkingPeriod(positions: PositionWithDates[]) {\n  const DATE_FORMAT = Util.LUXON_DATE_FORMAT.YYYY_DOT_LL;\n  const startedAt = positions[positions.length - 1].startedAtDate;\n  const isCurrentlyEmployed = positions.some((position) => position.isCurrent);\n\n  // 재직 중일 때는 종료일 없이 표시\n  if (isCurrentlyEmployed) {\n    return `${startedAt.toFormat(DATE_FORMAT)} ~`;\n  }\n\n  function hasEndedAtDate(\n    position: PositionWithDates,\n  ): position is PositionWithDates & { endedAtDate: DateTime } {\n    return position.endedAtDate !== null;\n  }\n\n  const endedAtDates = positions.filter(hasEndedAtDate).map((position) => position.endedAtDate);\n\n  let endedAt: DateTime;\n  if (endedAtDates.length > 0) {\n    endedAt = DateTime.max(...endedAtDates);\n  } else {\n    endedAt = DateTime.local();\n  }\n\n  return `${startedAt.toFormat(DATE_FORMAT)} ~ ${endedAt.toFormat(DATE_FORMAT)}`;\n}\n\nfunction createSkillKeywords(skillKeywords?: string[]) {\n  if (!skillKeywords) {\n    return null;\n  }\n  return (\n    <li>\n      <strong>Skill Keywords</strong>\n      <div>\n        {skillKeywords.map((keyword, index) => (\n          <Badge\n            style={Style.skillKeywordBadge}\n            key={index.toString()}\n            color=\"secondary\"\n            className=\"mr-1\"\n          >\n            {keyword}\n          </Badge>\n        ))}\n      </div>\n    </li>\n  );\n}\n\nfunction createWorkingPeriod(startedAt: DateTime, endedAt?: DateTime | null) {\n  const DATE_FORMAT = Util.LUXON_DATE_FORMAT.YYYY_DOT_LL;\n\n  if (!endedAt) {\n    return `${startedAt.toFormat(DATE_FORMAT)} ~`;\n  }\n\n  return `${startedAt.toFormat(DATE_FORMAT)} ~ ${endedAt.toFormat(DATE_FORMAT)}`;\n}\n"]},"metadata":{},"sourceType":"module"}